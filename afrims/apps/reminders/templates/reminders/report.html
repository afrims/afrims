{% extends "reminders/base.html" %}

{% block right %}
<h1>Daily Appointment Confirmation Report</h1>
<h2>For Appointments on {{ appt_date }}</h2>
<div class="module">
    {% with unconfirmed_patients.count as unconfirmed_count %}
    <h2>Pending Reminders ({{ unconfirmed_count }})</h2>
    <table class="pagination sortable patient-reminders">
        <thead>
            <tr>
                <th>Study ID</th>                
                <th>Number</th>
                <th>Time of Last Reminder</th>
            </tr>
        </thead>
        {% for patient in unconfirmed_patients|slice:":20" %}
        <tr class="{% cycle 'odd' 'even' %}">
            <td>{{ patient.subject_number }}</td>
            <td>{{ patient.mobile_number }}</td>
            <td>{{ patient.last_reminder_time }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan='3'>No pending reminders</td>
        </tr>
        {% endfor %}
        <tfoot>
            <tr>
                <td colspan='3'>
                    <a href="{% url reminders-report %}?status=unconfirmed">See all unconfirmed appointments</a>
                </td>
            </tr>
        </tfoot>
    </table>
    {% endwith %}
</div>
<div class="module">
    {% with confirmed_patients.count as confirmed_count %}
    <h2>Confirmed Appointments ({{ confirmed_count }})</h2>
    <table class="pagination sortable patient-reminders">
        <thead>
            <tr>
                <th>Study ID</th>                
                <th>Number</th>
                <th>Time Confirmed</th>
            </tr>
        </thead>
        {% for patient in confirmed_patients|slice:":20" %}
        <tr class="{% cycle 'odd' 'even' %}">
            <td>{{ patient.subject_number }}</td>
            <td>{{ patient.mobile_number }}</td>
            <td>{{ patient.confirm_time }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan='3'>No confirmed appointments</td>
        </tr>
        {% endfor %}
        <tfoot>
            <tr>
                <td colspan='3'>
                    <a href="{% url reminders-report %}?status=confirmed">See all confirmed appointments</a>
                </td>
            </tr>
        </tfoot>
    </table>
    {% endwith %}
</div>
{% endblock %}
